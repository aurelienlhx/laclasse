/* 
 * LaClasse.js for ES 5.1+
 * @author AurÃ©lien Lheureux
 * @see http://ejohn.org/blog/simple-javascript-inheritance/
 * @see http://ifandelse.com/its-not-hard-making-your-library-support-amd-and-commonjs/
 * @licence MIT Licensed
 */
!function(a,b){if("function"==typeof define&&define.amd)define(b);else if("object"==typeof c&&c.exports)c.exports=b(a);else{var c=b(a);a[c.className]=c}}("undefined"!=typeof window?window:this,function(a){"use strict";function i(){throw new Error("LaClasse is not a constructor. Use LaClasse.create() instead.")}var b={baseMethods:{}},d=(!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),function(a){return a.name||a.toString().match(/^function\s+(\w+)\s*\(/)[1]||null}),e=function(a){var b=a.toString().match(/^function(?:\s+\w+\s*)?\((.+)\)/);return b?b[1].split(",").map(function(a){return a.trim()}):null},g=/\bthis\.parent\b/,h=function(b,c){var d=e(b),f=[];for(var g in d)f.push(a[d[g]]);"function"==typeof c&&(f=Object.keys(f).map(function(a){return f[a]}),c(f))};i.className="LaClasse",i.constructor=i;var j=function(c,e){function q(a){"function"==typeof a.__parent__&&(a=q(new a.__parent__));for(var b in a)a.hasOwnProperty(b)&&"function"!=typeof a[b]?p[b]=a[b]:e[b]=e.__parent__&&"function"==typeof e.__parent__[b]&&g.test(a[b].toString())?function(a,b){return function(){var c=this.parent;this.parent=e.__parent__[a];var d=b.apply(this,arguments);return this.parent=c,d}}(b,a[b]):a[b]}var f=Array.prototype.slice.call(arguments);1===f.length?(c=null,e=f[0]):(c=f[0],e=f[1]);var k=a;if(null!==c)var l=c.split(".");for(var m in l)void 0===k[l[m]]&&(k[l[m]]={},k=k[l[m]]);if("function"!=typeof e)throw new Error("Type function expected for extend");var n=d(e)||"anonymous";e.prototype["static"]=this.prototype["static"]||{};var o=new(this.className===i.className?function(){}:this),p={};q(o),e.className=n,e.__parent__=this.className===i.className?null:this.prototype,h(e,function(a){a=[null].concat(a);var b=new(Function.prototype.bind.apply(e,a));q(b)});var r=function(){for(var a in p)this[a]=p[a];"function"==typeof e.construct&&e.construct.apply(this,arguments),this.fire("created")};e.instanceOf=function(a){for(var b=this;b;){if(b.className===a)return!0;b=this.__parent__}return!1},e.clone=function(){var a=new this.constructor;for(var b in this)this.hasOwnProperty(b)&&(a[b]=this[b]);return a.__proto__=this.__proto__,this.fire("cloned"),a},e.hasProperty=function(a){return this.hasOwnProperty(a)},e.hasStaticProperty=function(a){return void 0!==this["static"][a]},e.hasMethod=function(a){return void 0!==this[a]&&"function"==typeof this[a]},e.on=function(a,b,c,d){this.events=this.events||[];var d=void 0!=d?d:!1;a=a.split(/\s+/);for(var e in a)"undefined"==typeof this.events[a[e]]&&(this.events[a[e]]=[]),"function"==typeof b&&this.events[a[e]].push({handler:b,data:c||{},once:d})},e.once=function(a,b,c){this.on(a,b,c,!0)},e.fire=function(a,b){a=a.split(/\s+/);for(var c in a){var d={type:a[c],target:this,timestamp:(new Date).getTime()},b="object"==typeof b?b:{};for(var e in b)void 0===d[e]&&(d[e]=b[e]);if(this.events&&this.events[d.type]instanceof Array)for(var f=this.events[d.type].length,g=0;f>g;g++){var h=this.events[d.type][g];"object"==typeof h.data&&(d.data=h.data),h.handler.call(this,d),h.once&&delete this.events[d.type][g]}}};var s="object"==typeof b.baseMethods?b.baseMethods:{};for(var m in s)s.hasOwnProperty(m)&&(e[m]=s[m]);return r.prototype=e,r.prototype.constructor=e,r.className=e.className,r.extend=j,"object"==typeof k&&(k[r.className]=r),r},k=function(a){for(var c in a)void 0!==b[c]&&(b[c]=a[c])};return i.create=j,i.config=k,i});